-- create tablespace newlec datafile 'c:\sw\app\VM1\oradata\ORCL\newlec.dbf' size 100m autoextend on next 10m;  

create tablespace newlec datafile 'c:\app\cskim\product\21c\oradata\XE\newlec.dbf' size 100m autoextend on next 10m;  
alter session set "_oracle_script"=true;
create user newlec identified by today default tablespace newlec; 

grant connect, resource, dba to newlec;

-- 아래거는 안되네
-- sqlplus newlec/today@localhost:1522/XEPDB1
sqlplus newlec/today@localhost:1522/XE

CREATE TABLE NOTICE
(
    ID         NUMBER,
    TITLE      NVARCHAR2(100),
    WRITER_ID  NVARCHAR2(50),
    CONTENT    CLOB,
    REGDATE    TIMESTAMP,
    HIT        NUMBER,
    FILES      NVARCHAR2(1000)
);

CREATE TABLE COMMENTS
(
    ID          NUMBER,
    CONTENT     NVARCHAR2(2000),
    REGDATE     TIMESTAMP,
    WRITER_ID   NVARCHAR2(50),
    NOTICE_ID   NUMBER
);

CREATE TABLE ROLE
(
    ID  VARCHAR2(50),
    DISCRIPTION NVARCHAR2(500),
);

CREATE TABLE MEMBER_ROLE
(
    MEMBER_ID   NVARCHAR2(50),
    ROLE_ID     VARCHAR2(50)
);

CREATE TABLE MEMBER
(
    ID          NVARCHAR2(50)
    , PWD       NVARCHAR2(50)
    , NAME      NVARCHAR2(50)
    , GENDER    NCHAR(2)
    , BIRTHDAY  CHAR(10)
    , PHONE     CHAR(13)
    , REGDATE   DATE
    , EMAIL     NVARCHAR2(200)
);
    
INSERT INTO NOTICE VALUES(1, 'JDBC란 무엇인가?', 'newlec', 'aaa', SYSDATE, 0, '');  
INSERT INTO NOTICE VALUES(2, 'JDBC2란 무엇인가?', 'newlec', 'aaa', SYSDATE, 0, '');  
INSERT INTO NOTICE VALUES(3, 'JDBC3란 무엇인가?', 'newlec', 'aaa', SYSDATE, 0, '');  
INSERT INTO NOTICE VALUES(4, 'JSP에서 JDBC 사용하기', 'dragon', 'aaa', SYSDATE, 9, '');
INSERT INTO NOTICE VALUES(5, 'Service 계층 추가하기', 'good', 'aaa', SYSDATE, 23, '');
INSERT INTO NOTICE VALUES(6, '전화번호로 연락주시기 바랍니다. 010-1234-5678', 'guest', 'aaa', SYSDATE, 23, '');
INSERT INTO NOTICE VALUES(7, '선반-접시-그릇 이 세가지요~', 'okay', 'aaa', SYSDATE, 1, '');



INSERT INTO NOTICE VALUES(8, '데이터베이스 서버가 고장났습니다.', 'newlec', '강의용 서버가 고장나서 모든 설치를 다시 해야만 합니다.', SYSDATE, 5, '');
INSERT INTO NOTICE VALUES(9, '데이터도 손실 되었습니다.', 'newlec', '일단 가상컴퓨터 하나 띄워서 그 컴에 세팅을 다시 했습니다.', SYSDATE, 2, '');
INSERT INTO NOTICE VALUES(10, '그럼 강의 업로드 못하는건가요?', 'newlec', '다행히 일부만 손실됨', SYSDATE, 0, '');
INSERT INTO NOTICE VALUES(11, '예제 파일들을 살리고 있습니다.', 'dragon', '일부 손실된 파일들은 제 강의 보면서 복구하였습니다.', SYSDATE, 9, '');


-- prev
SELECT * FROM NOTICE 
WHERE ID = (
	SELECT ID FROM NOTICE WHERE REGDATE > (
		SELECT REGDATE FROM NOTICE WHERE ID=3
	) AND ROWNUM = 1
);

-- next
SELECT ID FROM (SELECT * FROM NOTICE ORDER BY REGDATE DESC)
WHERE REGDATE < (SELECT REGDATE FROM NOTICE WHERE ID=3)
AND ROWNUM=1


    